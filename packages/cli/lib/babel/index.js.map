{"version":3,"file":"index.js","names":["_merge","_interopRequireDefault","require","_dir","_babelConfig","_babelConfigNode","_babelConfigNode2","_babelConfig2","_babelConfig3","e","__esModule","default","registerBabel","presets","plugins","buildEs","babelOptions","merge","configBase","configImport","configNodeEs","cliOptions","outDir","filenames","extensions","keepFileExtension","verbose","watch","relative","copyFiles","copyIgnored","includeDotfiles","skipInitialBuild","babelDir","buildLib","configNodeLib","getFrameWorkConfig","config","babelConfig","error","console","log","Object","keys","length","babelOptionWebpackDev","babelOptionWebpackProd","configWebpack"],"sources":["../../src/babel/index.js"],"sourcesContent":["import merge from './merge'\nimport babelDir from \"@babel/cli/lib/babel/dir\";\nimport configBase from './babel.config.base'\nimport configNodeEs from './babel.config.node.es'\nimport configNodeLib from './babel.config.node.lib'\nimport configImport from './babel.config.import'\nimport configWebpack from './babel.config.webpack'\n\nexport function registerBabel() {\n  require('@babel/register')({\n    // 支持在node环境下使用 ES6+ 语法\n    presets: ['@babel/preset-env'],\n    // 支持导出默认值，如 export a from 'b'\n    plugins: [\"@babel/plugin-proposal-export-default-from\"]\n  });\n}\n\n// build es\nexport function buildEs() {\n  const babelOptions = merge(configBase, configImport, configNodeEs)\n\n  const cliOptions = {\n    outDir: \"es\",\n    filenames: [\"src\"],\n    extensions: [\".ts\", \".tsx\", \".js\", \".jsx\"], // json 不需要编译\n    keepFileExtension: false, // 是否保留扩展名，.ts -> .js\n    verbose: true, // 输出提示\n    watch: null,\n    relative: null,\n    copyFiles: true, // 复制不编译的文件， 否则编译后将缺失不编译的文件\n    copyIgnored: true, // 复制忽略的文件， 否则编译后将缺失忽略的文件\n    includeDotfiles: true,\n    skipInitialBuild: null,\n  };\n\n  return babelDir({ cliOptions, babelOptions });\n\n}\n\n// build lib\nexport function buildLib() {\n  const babelOptions = merge(configBase, configNodeLib)\n\n  const cliOptions = {\n    outDir: \"lib\",\n    filenames: [\"src\"],\n    extensions: [\".ts\", \".tsx\", \".js\", \".jsx\"], // json 不需要编译\n    keepFileExtension: false, // 是否保留扩展名，.ts -> .js\n    verbose: true, // 输出提示\n    watch: null,\n    relative: null,\n    copyFiles: true, // 复制不编译的文件， 否则编译后将缺失不编译的文件\n    copyIgnored: true, // 复制忽略的文件， 否则编译后将缺失忽略的文件\n    includeDotfiles: true,\n    skipInitialBuild: null,\n  }\n\n  return babelDir({ cliOptions, babelOptions })\n}\n\nfunction getFrameWorkConfig() {\n  let config = {};\n\n  // try {\n  //   const { babelConfig } = require(\"@kwok/vue2.7\");\n\n  //   config = babelConfig();\n  // } catch (error) {}\n\n  try {\n    const { babelConfig } = require(\"@kwok/vue3\");\n\n    config = babelConfig();\n  } catch (error) {\n    console.log('error: ', error);\n\n  }\n\n  if(Object.keys(config).length === 0) { \n    console.log('Cannot find module \"@kwok/vue3\" in package.json')\n  }\n\n  return config;\n}\n\nexport function babelOptionWebpackDev() {\n  return merge(configBase, getFrameWorkConfig(), configImport)\n}\n\nexport function babelOptionWebpackProd() {\n  return merge(configBase, getFrameWorkConfig(), configImport, configWebpack)\n}"],"mappings":"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","ignoreList":[]}