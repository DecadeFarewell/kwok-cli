{"version":3,"file":"index.js","names":["_webpack","_interopRequireDefault","require","_webpackMerge","_webpack2","_webpackScript","_webpackScript2","_webpack3","_webpack4","_webpack5","_webpack6","_webpack7","_webpack8","_webpack9","_webpack10","_utils","e","__esModule","default","getFrameWorkConfig","config","webpackConfig","error","console","log","Object","keys","length","devCompiler","webpackMerge","base","scriptDev","style","resource","cache","output","polyfill","other","fallback","requireWebpackConfig","webpack","browserCompiler","scriptProd","optimization","Promise","resolve","reject","run","stats","toString","colors","chunks","hasErrors","Error"],"sources":["../../src/webpack/index.js"],"sourcesContent":["import webpack from \"webpack\";\nimport webpackMerge from \"webpack-merge\";\nimport base from \"./webpack.base\";\nimport scriptDev from \"./webpack.script.dev\";\nimport scriptProd from \"./webpack.script.prod\";\nimport output from \"./webpack.output\";\nimport optimization from \"./webpack.optimization\"; // for production\nimport style from \"./webpack.style\";\nimport resource from \"./webpack.resource\";\nimport cache from \"./webpack.cache\";\nimport other from \"./webpack.other\";\nimport fallback from \"./webpack.fallback\";\nimport polyfill from \"./webpack.polyfill\";\nimport { requireWebpackConfig } from \"@kwok/utils\";\n\nfunction getFrameWorkConfig() {\n  let config = {};\n\n  // try {\n  //   const { webpackConfig } = require(\"@kwok/vue2.7\");\n\n  //   config = webpackConfig();\n  // } catch (error) {}\n\n  try {\n    const { webpackConfig } = require(\"@kwok/vue3\");\n\n    config = webpackConfig();\n  } catch (error) {\n    console.log(\"error: \", error);\n  }\n\n  if (Object.keys(config).length === 0) {\n    console.log('Cannot find module \"@kwok/vue3\" in package.json');\n  }\n\n  return config;\n}\n\nexport function devCompiler() {\n  const config = webpackMerge(\n    base,\n    scriptDev,\n    getFrameWorkConfig(),\n    style(),\n    resource,\n    cache,\n    output,\n    polyfill,\n    other,\n    fallback,\n    requireWebpackConfig().default\n  );\n\n  return webpack(config);\n}\n\n// 打包dist\nexport function browserCompiler() {\n  const config = webpackMerge(\n    base,\n    scriptProd,\n    getFrameWorkConfig(),\n    style(),\n    resource,\n    cache,\n    output,\n    optimization,\n    polyfill,\n    other,\n    fallback,\n    requireWebpackConfig().default\n  );\n\n  return new Promise((resolve, reject) => {\n    webpack(config).run((error, stats) => {\n      if (error) {\n        reject(error);\n        return;\n      }\n      console.log(\n        stats.toString({\n          colors: true,\n          chunks: true,\n        })\n      );\n      // 错误输出\n      if (stats.hasErrors()) {\n        reject(new Error(\"build failed\"));\n        return;\n      }\n      resolve(\"success\");\n    });\n  });\n}\n"],"mappings":"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","ignoreList":[]}