{"version":3,"file":"webpack.base.js","names":["_path","_interopRequireDefault","require","_webpack","_cliProgress","_utils","e","__esModule","default","cliProgressBar","cliProgress","Bar","stopOnComplete","linewrap","hideCursor","format","barCompleteChar","barIncompleteChar","handler","percentage","args","isActive","start","update","text","join","_default","exports","mode","process","env","NODE_ENV","context","cwdPath","cwd","entry","output","filename","path","outputPath","clean","module","rules","test","exclude","use","loader","plugins","webpack","ProgressPlugin"],"sources":["../../src/webpack/webpack.base.js"],"sourcesContent":["import path from 'path'\nimport webpack from \"webpack\";\nimport cliProgress from 'cli-progress';\nimport { cwdPath, outputPath } from \"@kwok/utils\";\n\nconst cliProgressBar = new cliProgress.Bar(\n  {\n    // clearOnComplete: true,\n    stopOnComplete: true,\n    linewrap: true,\n    hideCursor: true,\n  },\n  {\n    format:\n      \"@kwok webpack progress [{bar}] {percentage}% | ETA: {eta}s | {text}\",\n    barCompleteChar: \"=\",\n    barIncompleteChar: \"-\",\n  }\n);\nfunction handler(percentage, ...args) {\n  if (!cliProgressBar.isActive) {\n    cliProgressBar.start(1, 0);\n  }\n  cliProgressBar.update(percentage, { text: args.join(\" \") });\n}\n\nexport default {\n  mode: process.env.NODE_ENV === \"development\" ? \"development\" : \"production\",\n  context: cwdPath,\n  context: process.cwd(),\n  entry: './src/client/index.js',\n  output: {\n    filename: 'bundle.js',\n    path: outputPath,\n    clean: true, // 每次构建前清空 output.path 指定的文件夹内容\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n        },\n      },\n    ],\n  },\n  plugins: [\n    // 进度\n    new webpack.ProgressPlugin(handler),\n  ],\n};\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAAkD,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAElD,MAAMG,cAAc,GAAG,IAAIC,oBAAW,CAACC,GAAG,CACxC;EACE;EACAC,cAAc,EAAE,IAAI;EACpBC,QAAQ,EAAE,IAAI;EACdC,UAAU,EAAE;AACd,CAAC,EACD;EACEC,MAAM,EACJ,qEAAqE;EACvEC,eAAe,EAAE,GAAG;EACpBC,iBAAiB,EAAE;AACrB,CACF,CAAC;AACD,SAASC,OAAOA,CAACC,UAAU,EAAE,GAAGC,IAAI,EAAE;EACpC,IAAI,CAACX,cAAc,CAACY,QAAQ,EAAE;IAC5BZ,cAAc,CAACa,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC5B;EACAb,cAAc,CAACc,MAAM,CAACJ,UAAU,EAAE;IAAEK,IAAI,EAAEJ,IAAI,CAACK,IAAI,CAAC,GAAG;EAAE,CAAC,CAAC;AAC7D;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEc;EACboB,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAAG,aAAa,GAAG,YAAY;EAC3EC,OAAO,EAAEC,cAAO;EAChBD,OAAO,EAAEH,OAAO,CAACK,GAAG,CAAC,CAAC;EACtBC,KAAK,EAAE,uBAAuB;EAC9BC,MAAM,EAAE;IACNC,QAAQ,EAAE,WAAW;IACrBC,IAAI,EAAEC,iBAAU;IAChBC,KAAK,EAAE,IAAI,CAAE;EACf,CAAC;EACDC,MAAM,EAAE;IACNC,KAAK,EAAE,CACL;MACEC,IAAI,EAAE,OAAO;MACbC,OAAO,EAAE,cAAc;MACvBC,GAAG,EAAE;QACHC,MAAM,EAAE;MACV;IACF,CAAC;EAEL,CAAC;EACDC,OAAO,EAAE;EACP;EACA,IAAIC,gBAAO,CAACC,cAAc,CAAC/B,OAAO,CAAC;AAEvC,CAAC","ignoreList":[]}