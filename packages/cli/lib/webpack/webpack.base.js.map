{"version":3,"file":"webpack.base.js","names":["_webpack","_interopRequireDefault","require","_cliProgress","_utils","e","__esModule","default","cliProgressBar","cliProgress","Bar","stopOnComplete","linewrap","hideCursor","format","barCompleteChar","barIncompleteChar","handler","percentage","args","isActive","start","update","text","join","_default","exports","mode","process","env","NODE_ENV","module","rules","test","exclude","use","loader","plugins","webpack","IgnorePlugin","resourceRegExp","contextRegExp","ProgressPlugin"],"sources":["../../src/webpack/webpack.base.js"],"sourcesContent":["import webpack from \"webpack\";\nimport cliProgress from 'cli-progress';\nimport { cwdPath } from \"@kwok/utils\";\n\nconst cliProgressBar = new cliProgress.Bar(\n  {\n    // clearOnComplete: true,\n    stopOnComplete: true,\n    linewrap: true,\n    hideCursor: true,\n  },\n  {\n    format:\n      \"@kwok webpack progress [{bar}] {percentage}% | ETA: {eta}s | {text}\",\n    barCompleteChar: \"=\",\n    barIncompleteChar: \"-\",\n  }\n);\nfunction handler(percentage, ...args) {\n  if (!cliProgressBar.isActive) {\n    cliProgressBar.start(1, 0);\n  }\n  cliProgressBar.update(percentage, { text: args.join(\" \") });\n}\n\nexport default {\n  mode: process.env.NODE_ENV === \"development\" ? \"development\" : \"production\",\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n        },\n      },\n    ],\n  },\n  plugins: [\n    // 忽略第三方包指定目录，让这些目录不要被打包进去。\n    // 打包时忽略momemt这个包中xxx/locale/ 目录下的所有内容\n    new webpack.IgnorePlugin({\n      resourceRegExp: /^\\.\\/locale$/,\n      contextRegExp: /moment$/,\n    }),\n    // 进度\n    new webpack.ProgressPlugin(handler),\n  ],\n};\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AAAsC,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEtC,MAAMG,cAAc,GAAG,IAAIC,oBAAW,CAACC,GAAG,CACxC;EACE;EACAC,cAAc,EAAE,IAAI;EACpBC,QAAQ,EAAE,IAAI;EACdC,UAAU,EAAE;AACd,CAAC,EACD;EACEC,MAAM,EACJ,qEAAqE;EACvEC,eAAe,EAAE,GAAG;EACpBC,iBAAiB,EAAE;AACrB,CACF,CAAC;AACD,SAASC,OAAOA,CAACC,UAAU,EAAE,GAAGC,IAAI,EAAE;EACpC,IAAI,CAACX,cAAc,CAACY,QAAQ,EAAE;IAC5BZ,cAAc,CAACa,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC5B;EACAb,cAAc,CAACc,MAAM,CAACJ,UAAU,EAAE;IAAEK,IAAI,EAAEJ,IAAI,CAACK,IAAI,CAAC,GAAG;EAAE,CAAC,CAAC;AAC7D;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEc;EACboB,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAAG,aAAa,GAAG,YAAY;EAC3EC,MAAM,EAAE;IACNC,KAAK,EAAE,CACL;MACEC,IAAI,EAAE,OAAO;MACbC,OAAO,EAAE,cAAc;MACvBC,GAAG,EAAE;QACHC,MAAM,EAAE;MACV;IACF,CAAC;EAEL,CAAC;EACDC,OAAO,EAAE;EACP;EACA;EACA,IAAIC,gBAAO,CAACC,YAAY,CAAC;IACvBC,cAAc,EAAE,cAAc;IAC9BC,aAAa,EAAE;EACjB,CAAC,CAAC;EACF;EACA,IAAIH,gBAAO,CAACI,cAAc,CAACzB,OAAO,CAAC;AAEvC,CAAC","ignoreList":[]}